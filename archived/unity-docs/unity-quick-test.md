# Unity窗口嵌入快速测试

## 🎯 目标
快速验证Unity 3D窗口能够成功嵌入到Qt应用程序中，实现统一的用户界面。

## ⚡ 快速测试步骤

### 1. 启动Qt程序
```bash
cd build/bin/Debug
./SprayTrajectoryPlanning.exe
```

### 2. 设置Unity项目（仅首次需要）
1. **打开Unity Hub**
2. **添加项目**：选择 `Unity/SpraySimulation` 文件夹
3. **打开项目**，等待加载完成
4. **设置场景**：
   - 打开 `Assets/Scenes/SampleScene.unity`
   - 创建空GameObject，命名"QtCommunication"
   - 添加QtCommunication脚本
   - 保存场景

### 3. 测试窗口嵌入

#### 方法A：自动启动（推荐）
1. 在Qt程序中点击 **"启动Unity应用程序"**
2. 等待Unity编辑器启动
3. 在Unity中点击 **▶️播放按钮**
4. 观察Qt界面中Unity窗口自动嵌入

#### 方法B：手动启动
1. 手动打开Unity项目
2. 点击▶️播放按钮
3. Qt会自动检测并嵌入Unity窗口

### 4. 验证功能
- ✅ Unity窗口嵌入到Qt界面
- ✅ 状态显示"Unity已连接"
- ✅ 可以在Qt界面中操作Unity场景
- ✅ 导入点云文件测试3D显示

## 🔧 故障排除

### 问题1：找不到Unity编辑器
**解决**：手动启动Unity项目，Qt会自动检测

### 问题2：Unity窗口未嵌入
**检查**：
- Unity是否在播放模式
- Qt程序是否显示"正在尝试嵌入Unity窗口"
- 查看控制台日志

### 问题3：连接失败
**检查**：
- Unity场景中是否有QtCommunication组件
- 端口12346是否被占用
- 防火墙设置

## 📊 成功标志

当看到以下情况时，表示集成成功：

1. **Qt界面**：
   - 状态显示"Unity已连接 ✓"
   - 3D视图区域显示Unity内容
   - 按钮显示"Unity已嵌入"

2. **Unity Console**：
   ```
   Unity Qt通信模块启动
   ✅ 成功连接到Qt应用程序
   ```

3. **功能测试**：
   - 导入点云文件能在Unity中显示
   - 鼠标可以在嵌入窗口中操作3D场景
   - 窗口大小调整时Unity窗口同步调整

## 🎮 操作说明

### Unity中的相机控制
- **鼠标左键**：旋转视角
- **滚轮**：缩放
- **Shift+左键**：平移
- **R键**：重置视角
- **F键**：聚焦到点云

### Qt中的功能
- **导入点云**：加载3D模型
- **启动仿真**：开始轨迹规划
- **重置视图**：恢复默认视角

---

**测试完成后**，你就拥有了一个集成Unity 3D引擎的Qt应用程序，可以在统一界面中进行3D可视化和交互操作。

**下一步**：尝试导入更大的点云文件，测试性能优化效果。