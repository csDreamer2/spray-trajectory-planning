# å¼€å‘è€…åä½œæŒ‡å—

## ğŸ“‹ ç›®å½•
- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [å¼€å‘ç¯å¢ƒå‡†å¤‡](#å¼€å‘ç¯å¢ƒå‡†å¤‡)
- [è·å–é¡¹ç›®ä»£ç ](#è·å–é¡¹ç›®ä»£ç )
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤ä»£ç ](#æäº¤ä»£ç )
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**å–·æ¶‚è½¨è¿¹è§„åˆ’ç³»ç»Ÿ** æ˜¯ä¸€ä¸ªåŸºäºQtã€VTKå’ŒOpenCASCADEçš„å·¥ä¸šå–·æ¶‚è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- ğŸ”§ 3Dæ¨¡å‹åŠ è½½å’Œæ˜¾ç¤ºï¼ˆæ”¯æŒSTEPã€STLç­‰æ ¼å¼ï¼‰
- ğŸ“Š ç‚¹äº‘æ•°æ®å¤„ç†å’Œå¯è§†åŒ–
- ğŸ¯ å–·æ¶‚è½¨è¿¹è‡ªåŠ¨è§„åˆ’
- ğŸ–¥ï¸ ç°ä»£åŒ–Qtç”¨æˆ·ç•Œé¢
- âš¡ å¼‚æ­¥åŠ è½½å’Œæ€§èƒ½ä¼˜åŒ–

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒå‡†å¤‡

### å¿…éœ€è½¯ä»¶

1. **æ“ä½œç³»ç»Ÿ**
   - Windows 10/11 (æ¨è)
   - Linux Ubuntu 20.04+ (æ”¯æŒ)

2. **å¼€å‘å·¥å…·**
   ```bash
   # å¿…éœ€å·¥å…·
   - Visual Studio 2019/2022 (Windows)
   - Qt 6.5.0+
   - CMake 3.20+
   - Git 2.30+
   - vcpkg (åŒ…ç®¡ç†å™¨)
   ```

3. **ä¸»è¦ä¾èµ–åº“**
   ```json
   {
     "qt6": "6.5.0+",
     "vtk": "9.2.0+", 
     "opencascade": "7.6.0+",
     "boost": "1.80.0+"
   }
   ```

### ç¯å¢ƒé…ç½®æ­¥éª¤

#### Windowsç¯å¢ƒ

1. **å®‰è£…Visual Studio**
   ```bash
   # ä¸‹è½½å¹¶å®‰è£…Visual Studio 2019/2022
   # ç¡®ä¿åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š
   - MSVC v143ç¼–è¯‘å™¨
   - Windows 10/11 SDK
   - CMakeå·¥å…·
   ```

2. **å®‰è£…Qt**
   ```bash
   # æ–¹æ³•1ï¼šå®˜æ–¹å®‰è£…å™¨
   https://www.qt.io/download-qt-installer
   
   # æ–¹æ³•2ï¼švcpkgå®‰è£…
   vcpkg install qt6[core,widgets,opengl]
   ```

3. **é…ç½®vcpkg**
   ```bash
   # å…‹éš†vcpkg
   git clone https://github.com/Microsoft/vcpkg.git
   cd vcpkg
   .\bootstrap-vcpkg.bat
   
   # é›†æˆåˆ°Visual Studio
   .\vcpkg integrate install
   ```

#### Linuxç¯å¢ƒ

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install build-essential cmake git
sudo apt install qt6-base-dev qt6-tools-dev
sudo apt install libvtk9-dev
sudo apt install libopencascade-dev

# æˆ–ä½¿ç”¨vcpkgç»Ÿä¸€ç®¡ç†
git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
```

## ğŸ“¥ è·å–é¡¹ç›®ä»£ç 

### 1. Forké¡¹ç›®

è®¿é—®é¡¹ç›®ä¸»é¡µå¹¶Forkåˆ°ä½ çš„è´¦æˆ·ï¼š
```
https://github.com/csDreamer2/spray-trajectory-planning
```

### 2. å…‹éš†ä»£ç 

```bash
# å…‹éš†ä½ Forkçš„ä»“åº“
git clone https://github.com/ä½ çš„ç”¨æˆ·å/spray-trajectory-planning.git
cd spray-trajectory-planning

# æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/csDreamer2/spray-trajectory-planning.git

# éªŒè¯è¿œç¨‹ä»“åº“
git remote -v
```

### 3. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨vcpkgå®‰è£…ä¾èµ–
vcpkg install --triplet x64-windows

# æˆ–è€…è¿è¡Œé¡¹ç›®æä¾›çš„è„šæœ¬ï¼ˆæ…ç”¨ï¼‰
scripts/setup_environment.bat  # Windows
scripts/setup_environment.sh   # Linux
```

### 4. æ„å»ºé¡¹ç›®

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir build && cd build

# é…ç½®CMake
cmake .. -DCMAKE_TOOLCHAIN_FILE=[vcpkgè·¯å¾„]/scripts/buildsystems/vcpkg.cmake

# ç¼–è¯‘é¡¹ç›®
cmake --build . --config Release

# è¿è¡Œæµ‹è¯•
ctest --output-on-failure
```

## ğŸ”„ å¼€å‘æµç¨‹

### 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯

```bash
# åŒæ­¥æœ€æ–°ä»£ç 
git checkout main
git pull upstream main

# åˆ›å»ºæ–°åŠŸèƒ½åˆ†æ”¯
git checkout -b feature/ä½ çš„åŠŸèƒ½åç§°

# ä¾‹å¦‚ï¼š
git checkout -b feature/improve-loading-performance
git checkout -b bugfix/fix-memory-leak
git checkout -b docs/update-api-documentation
```

### 2. åˆ†æ”¯å‘½åè§„èŒƒ

```bash
# åŠŸèƒ½å¼€å‘
feature/åŠŸèƒ½æè¿°          # feature/add-batch-processing
feature/æ¨¡å—å-åŠŸèƒ½       # feature/ui-responsive-design

# Bugä¿®å¤  
bugfix/é—®é¢˜æè¿°          # bugfix/fix-crash-on-startup
hotfix/ç´§æ€¥ä¿®å¤          # hotfix/security-vulnerability

# æ–‡æ¡£æ›´æ–°
docs/æ–‡æ¡£ç±»å‹            # docs/api-reference
docs/guide-ç±»å‹          # docs/installation-guide

# æ€§èƒ½ä¼˜åŒ–
perf/ä¼˜åŒ–å†…å®¹            # perf/async-loading-optimization

# é‡æ„
refactor/é‡æ„å†…å®¹        # refactor/simplify-data-structure
```

### 3. å¼€å‘è§„èŒƒ

#### ä»£ç é£æ ¼

```cpp
// æ–‡ä»¶å¤´æ³¨é‡Š
/**
 * @file MainWindow.cpp
 * @brief ä¸»çª—å£å®ç°
 * @author ä½ çš„å§“å
 * @date 2024-12-20
 */

// ç±»å‘½åï¼šPascalCase
class SprayTrajectoryPlanner {
public:
    // å‡½æ•°å‘½åï¼šcamelCase
    void calculateTrajectory();
    bool loadPointCloud(const QString& filePath);
    
private:
    // æˆå‘˜å˜é‡ï¼šm_å‰ç¼€ + camelCase
    QString m_currentFilePath;
    QTimer* m_updateTimer;
    
    // å¸¸é‡ï¼škå‰ç¼€ + PascalCase
    static const int kMaxPointCount = 1000000;
};

// å‘½åç©ºé—´
namespace SprayPlanning {
    // æšä¸¾ï¼šPascalCase
    enum class LoadingQuality {
        Low,
        Medium, 
        High
    };
}
```

#### æ³¨é‡Šè§„èŒƒ

```cpp
/**
 * @brief å¼‚æ­¥åŠ è½½STEPæ–‡ä»¶
 * @param filePath æ–‡ä»¶è·¯å¾„
 * @param quality åŠ è½½è´¨é‡çº§åˆ«
 * @return åŠ è½½æ˜¯å¦æˆåŠŸå¯åŠ¨
 * 
 * @note æ­¤å‡½æ•°ä¼šåœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡ŒåŠ è½½æ“ä½œ
 * @warning ç¡®ä¿åœ¨UIçº¿ç¨‹ä¸­è°ƒç”¨æ­¤å‡½æ•°
 * @see loadSTLFile(), loadPointCloud()
 */
bool loadSTEPFileAsync(const QString& filePath, LoadingQuality quality);

// å•è¡Œæ³¨é‡Šç”¨äºè§£é‡Šå¤æ‚é€»è¾‘
// è®¡ç®—å–·æ¶‚è½¨è¿¹çš„æœ€ä¼˜è·¯å¾„
for (const auto& point : pointCloud) {
    // è·³è¿‡æ— æ•ˆç‚¹
    if (!point.isValid()) continue;
    
    // è®¡ç®—åˆ°å½“å‰ä½ç½®çš„è·ç¦»
    double distance = calculateDistance(currentPos, point.position);
}
```

### 4. æäº¤è§„èŒƒ

#### æäº¤ä¿¡æ¯æ ¼å¼

```bash
<ç±»å‹>(<èŒƒå›´>): <ç®€çŸ­æè¿°>

<è¯¦ç»†æè¿°>

<ç›¸å…³Issue>
```

#### æäº¤ç±»å‹

```bash
feat:     æ–°åŠŸèƒ½
fix:      Bugä¿®å¤
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: é‡æ„ï¼ˆä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤ï¼‰
perf:     æ€§èƒ½ä¼˜åŒ–
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

#### æäº¤ç¤ºä¾‹

```bash
# å¥½çš„æäº¤ç¤ºä¾‹
git commit -m "feat(ui): æ·»åŠ å¼‚æ­¥åŠ è½½è¿›åº¦æ¡

- å®ç°åå°åŠ è½½è¿›åº¦è·Ÿè¸ª
- æ·»åŠ å–æ¶ˆåŠ è½½åŠŸèƒ½
- ä¼˜åŒ–UIå“åº”æ€§èƒ½

Closes #123"

git commit -m "fix(loader): ä¿®å¤STEPæ–‡ä»¶å†…å­˜æ³„æ¼

- æ­£ç¡®é‡Šæ”¾OpenCASCADEå¯¹è±¡
- æ·»åŠ å¼‚å¸¸å¤„ç†æœºåˆ¶
- æ›´æ–°ç›¸å…³å•å…ƒæµ‹è¯•

Fixes #456"

git commit -m "docs: æ›´æ–°APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

- è¡¥å……PointCloudLoaderç±»æ–‡æ¡£
- æ·»åŠ ä»£ç ä½¿ç”¨ç¤ºä¾‹
- ä¿®æ­£æ–‡æ¡£ä¸­çš„é”™è¯¯é“¾æ¥"
```

## ğŸ“¤ æäº¤ä»£ç 

### 1. æäº¤å‰æ£€æŸ¥

```bash
# è¿è¡Œæµ‹è¯•
scripts/run_tests.bat

# æ£€æŸ¥ä»£ç æ ¼å¼
scripts/check_format.bat

# éªŒè¯æ„å»º
scripts/verify_build.bat
```

### 2. æ¨é€ä»£ç 

```bash
# æäº¤æ›´æ”¹
git add .
git commit -m "feat: ä½ çš„åŠŸèƒ½æè¿°"

# æ¨é€åˆ°ä½ çš„Fork
git push origin feature/ä½ çš„åŠŸèƒ½åç§°
```

### 3. åˆ›å»ºPull Request

1. **è®¿é—®GitHubé¡µé¢**
   - æ‰“å¼€ä½ Forkçš„ä»“åº“é¡µé¢
   - ç‚¹å‡» "Compare & pull request"

2. **å¡«å†™PRä¿¡æ¯**
   ```markdown
   ## ğŸ“‹ å˜æ›´è¯´æ˜
   
   ### ğŸ¯ åŠŸèƒ½æè¿°
   - æ·»åŠ äº†å¼‚æ­¥STEPæ–‡ä»¶åŠ è½½åŠŸèƒ½
   - å®ç°äº†åŠ è½½è¿›åº¦æ˜¾ç¤º
   - ä¼˜åŒ–äº†å†…å­˜ä½¿ç”¨
   
   ### ğŸ”§ æŠ€æœ¯ç»†èŠ‚
   - ä½¿ç”¨QThreadå®ç°åå°åŠ è½½
   - æ·»åŠ äº†è¿›åº¦å›è°ƒæœºåˆ¶
   - å®ç°äº†åŠ è½½å–æ¶ˆåŠŸèƒ½
   
   ### ğŸ§ª æµ‹è¯•æƒ…å†µ
   - [x] å•å…ƒæµ‹è¯•é€šè¿‡
   - [x] é›†æˆæµ‹è¯•é€šè¿‡
   - [x] æ‰‹åŠ¨æµ‹è¯•éªŒè¯
   
   ### ğŸ“¸ æˆªå›¾/æ¼”ç¤º
   ï¼ˆå¦‚æœæœ‰UIå˜æ›´ï¼Œè¯·æä¾›æˆªå›¾ï¼‰
   
   ### ğŸ”— ç›¸å…³Issue
   Closes #123
   Related to #456
   ```

3. **PRæ ‡é¢˜è§„èŒƒ**
   ```bash
   feat: æ·»åŠ å¼‚æ­¥STEPæ–‡ä»¶åŠ è½½åŠŸèƒ½
   fix: ä¿®å¤ç‚¹äº‘æ˜¾ç¤ºå†…å­˜æ³„æ¼é—®é¢˜
   docs: æ›´æ–°å¼€å‘è€…æ–‡æ¡£å’ŒAPIè¯´æ˜
   perf: ä¼˜åŒ–å¤§æ–‡ä»¶åŠ è½½æ€§èƒ½
   ```

## ğŸ“ ä»£ç è§„èŒƒ

### æ–‡ä»¶ç»„ç»‡

```
src/
â”œâ”€â”€ Core/           # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ Engine/     # è®¡ç®—å¼•æ“
â”‚   â””â”€â”€ Utils/      # å·¥å…·ç±»
â”œâ”€â”€ Data/           # æ•°æ®å¤„ç†
â”‚   â”œâ”€â”€ Loaders/    # æ–‡ä»¶åŠ è½½å™¨
â”‚   â””â”€â”€ Processors/ # æ•°æ®å¤„ç†å™¨
â”œâ”€â”€ UI/             # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ Widgets/    # è‡ªå®šä¹‰æ§ä»¶
â”‚   â””â”€â”€ Dialogs/    # å¯¹è¯æ¡†
â””â”€â”€ Tests/          # æµ‹è¯•ä»£ç 
    â”œâ”€â”€ Unit/       # å•å…ƒæµ‹è¯•
    â””â”€â”€ Integration/ # é›†æˆæµ‹è¯•
```

### å¤´æ–‡ä»¶åŒ…å«é¡ºåº

```cpp
// 1. å¯¹åº”çš„å¤´æ–‡ä»¶
#include "MainWindow.h"

// 2. C++æ ‡å‡†åº“
#include <memory>
#include <vector>
#include <string>

// 3. Qtåº“
#include <QApplication>
#include <QMainWindow>
#include <QTimer>

// 4. ç¬¬ä¸‰æ–¹åº“
#include <vtkRenderer.h>
#include <TopoDS_Shape.hxx>

// 5. é¡¹ç›®å†…éƒ¨å¤´æ–‡ä»¶
#include "Core/Engine.h"
#include "Data/PointCloud.h"
```

## â“ å¸¸è§é—®é¢˜

### æ„å»ºé—®é¢˜

**Q: CMakeæ‰¾ä¸åˆ°Qt6**
```bash
# è§£å†³æ–¹æ¡ˆ
export Qt6_DIR=/path/to/qt6/lib/cmake/Qt6  # Linux
set Qt6_DIR=C:\Qt\6.5.0\msvc2019_64\lib\cmake\Qt6  # Windows
```

**Q: vcpkgä¾èµ–å®‰è£…å¤±è´¥**
```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…
vcpkg remove --outdated
vcpkg install --recurse
```

**Q: ç¼–è¯‘æ—¶å‡ºç°ä¸­æ–‡ç¼–ç é—®é¢˜**
```bash
# ç¡®ä¿æ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 
# Visual Studio: æ–‡ä»¶ -> é«˜çº§ä¿å­˜é€‰é¡¹ -> UTF-8
# æˆ–ä½¿ç”¨scripts/fix_encoding.batè„šæœ¬
```

### Gitæ“ä½œé—®é¢˜

**Q: å¦‚ä½•åŒæ­¥ä¸Šæ¸¸æ›´æ–°**
```bash
git fetch upstream
git checkout main
git merge upstream/main
git push origin main
```

**Q: å¦‚ä½•è§£å†³åˆå¹¶å†²çª**
```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç æ—¶å‡ºç°å†²çª
git pull upstream main

# 2. æ‰‹åŠ¨è§£å†³å†²çªæ–‡ä»¶ä¸­çš„æ ‡è®°
# <<<<<<< HEAD
# ä½ çš„ä»£ç 
# =======
# ä¸Šæ¸¸ä»£ç 
# >>>>>>> upstream/main

# 3. æ ‡è®°å†²çªå·²è§£å†³
git add å†²çªæ–‡ä»¶
git commit -m "resolve merge conflicts"
```

**Q: å¦‚ä½•æ’¤é”€é”™è¯¯çš„æäº¤**
```bash
# æ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼ˆä¿ç•™æ›´æ”¹ï¼‰
git reset --soft HEAD~1

# æ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼ˆä¸¢å¼ƒæ›´æ”¹ï¼‰
git reset --hard HEAD~1

# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯
git commit --amend -m "æ–°çš„æäº¤ä¿¡æ¯"
```

### å¼€å‘ç¯å¢ƒé—®é¢˜

**Q: VTKæ¸²æŸ“çª—å£æ˜¾ç¤ºå¼‚å¸¸**
```cpp
// ç¡®ä¿åœ¨ä¸»çº¿ç¨‹ä¸­åˆå§‹åŒ–VTK
QApplication app(argc, argv);
vtkObject::GlobalWarningDisplayOff();  // å…³é—­VTKè­¦å‘Š
```

**Q: OpenCASCADEå†…å­˜æ³„æ¼**
```cpp
// æ­£ç¡®çš„èµ„æºç®¡ç†
Handle(TopoDS_Shape) shape = loader.LoadShape();
// ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨ç®¡ç†å†…å­˜
std::shared_ptr<ShapeProcessor> processor = 
    std::make_shared<ShapeProcessor>(shape);
```

## ğŸ¤ è·å¾—å¸®åŠ©

- ğŸ“§ **é‚®ä»¶è”ç³»**: nxwr09@163.com
- ğŸ’¬ **Issueè®¨è®º**: [GitHub Issues](https://github.com/csDreamer2/spray-trajectory-planning/issues)
- ğŸ“– **æ–‡æ¡£**: æŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„è¯¦ç»†æ–‡æ¡£
- ğŸ”§ **æŠ€æœ¯æ”¯æŒ**: åœ¨Issueä¸­ä½¿ç”¨ `question` æ ‡ç­¾

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](../LICENSE) æ–‡ä»¶ã€‚

---

**æ„Ÿè°¢ä½ å¯¹é¡¹ç›®çš„è´¡çŒ®ï¼** ğŸ‰

æ¯ä¸€ä¸ªPull Requestéƒ½è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚å¦‚æœä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·ä¸è¦çŠ¹è±«ï¼Œéšæ—¶åœ¨Issueä¸­æé—®æˆ–è”ç³»ç»´æŠ¤è€…ã€‚