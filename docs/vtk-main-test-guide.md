# VTK主程序测试指南

## 测试目标
验证从Unity迁移到VTK的主程序功能是否正常。

## 测试环境
- **VTK版本**: 9.2 (用户编译版本)
- **VTK路径**: K:/Tools/vtkQT/build
- **Qt版本**: 6.x
- **编译状态**: ✅ 成功

## 测试步骤

### 1. 启动程序
```bash
cd build/bin/Debug
.\SprayTrajectoryPlanning.exe
```

或运行测试脚本：
```bash
.\test_vtk_main.bat
```

### 2. 界面验证
程序启动后应该显示：
- **主窗口**: "机器人喷涂轨迹规划系统 - VTK 3D引擎"
- **VTK 3D视图**: 深灰色背景的3D渲染窗口
- **控制面板**: 右侧包含VTK控制按钮
- **状态栏**: 显示"VTK 3D引擎已就绪"
- **坐标轴**: 左下角显示XYZ坐标轴

### 3. 功能测试

#### 3.1 点云加载测试
1. 点击"导入点云"按钮
2. 选择 `test_data/sample_cube.ply`
3. **预期结果**: 
   - 3D视图中显示红色点云
   - 状态栏显示"点云已加载 (xxx 个点)"
   - 自动适应场景显示

#### 3.2 视图控制测试
1. **重置视图**: 点击"重置视图"按钮
2. **适应场景**: 点击"适应场景"按钮
3. **鼠标交互**: 
   - 左键拖拽旋转视图
   - 滚轮缩放
   - 右键拖拽平移

#### 3.3 测试数据显示
1. 点击"显示测试数据"按钮
2. **预期结果**: 显示绿色螺旋轨迹线

#### 3.4 车间模型加载
1. 点击"加载车间模型"按钮
2. 选择 `data/model/杭汽轮总装.STEP`
3. **预期结果**: 提示转换为STL格式（STEP支持需要额外配置）

#### 3.5 控制按钮测试
- **坐标轴**: 切换坐标轴显示/隐藏
- **工件**: 切换点云显示/隐藏（加载点云后启用）
- **机器人**: 切换机器人模型显示/隐藏（加载机器人后启用）

### 4. 菜单测试
- **文件菜单**: 导入点云、退出
- **视图菜单**: 重置视图、适应场景

## 测试结果记录

### ✅ 成功项目
- [x] 程序正常启动
- [x] VTK 3D渲染窗口显示
- [x] 界面布局正确
- [x] 基础控制按钮功能

### 🔄 待测试项目
- [ ] 点云文件加载
- [ ] 3D交互操作
- [ ] 轨迹显示功能
- [ ] 状态面板日志

### ❌ 已知问题
- STEP文件支持需要额外配置
- 机器人模型加载功能待实现

## 性能对比

### Unity vs VTK
| 功能 | Unity | VTK | 改进 |
|------|-------|-----|------|
| 启动速度 | 慢 | 快 | ✅ |
| 内存占用 | 高 | 低 | ✅ |
| 集成复杂度 | 复杂 | 简单 | ✅ |
| 3D渲染质量 | 好 | 专业 | ✅ |
| CAD支持 | 有限 | 强大 | ✅ |

## 下一步计划
1. 完善点云加载功能测试
2. 实现机器人模型加载
3. 添加STEP文件支持（OpenCASCADE集成）
4. 优化3D渲染性能
5. 完善状态面板功能

## 总结
VTK迁移基本成功，主程序可以正常启动并显示3D界面。相比Unity方案，VTK提供了更好的Qt集成和专业的3D可视化能力。