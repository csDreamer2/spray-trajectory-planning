# 停靠面板恢复指南

**更新时间**: 2025-12-18  
**问题**: 右侧停靠面板被删除或隐藏  
**解决方案**: ✅ 已修复并提供多种恢复方法

## 🔧 恢复方法

### 方法1: 通过视图菜单恢复 ⭐ **推荐**

1. **打开视图菜单**:
   - 点击菜单栏中的"视图(V)"

2. **选择要显示的面板**:
   - ✅ 参数配置面板(P) - 显示/隐藏参数配置
   - ✅ 状态监控面板(S) - 显示/隐藏状态监控  
   - ✅ 安全监控面板(A) - 显示/隐藏安全监控

3. **一键重置布局**:
   - 点击"重置布局(R)" - 恢复所有面板到默认状态

### 方法2: 键盘快捷键 (待实现)

```
Ctrl+1 - 显示/隐藏参数配置面板
Ctrl+2 - 显示/隐藏状态监控面板  
Ctrl+3 - 显示/隐藏安全监控面板
Ctrl+R - 重置布局
```

### 方法3: 右键菜单恢复

1. **在工具栏或菜单栏右键**
2. **选择要显示的停靠面板**
3. **面板会自动恢复到右侧区域**

## 🎯 默认布局说明

### 停靠面板布局
```
主窗口
├── 菜单栏 (文件、仿真、机器人、视图、帮助)
├── 工具栏 (快捷操作按钮)
├── 中央区域 (Unity 3D视图)
├── 右侧停靠区域 (标签页模式)
│   ├── 📊 参数配置 (默认激活)
│   ├── 📈 状态监控
│   └── 🛡️ 安全监控
└── 状态栏 (系统状态信息)
```

### 面板功能说明

#### 📊 参数配置面板
- **喷涂参数**: 压力、流量、高度、材料
- **轨迹参数**: 重叠率、通道数
- **质量参数**: 目标膜厚、覆盖率
- **模板管理**: 保存/加载参数模板

#### 📈 状态监控面板  
- **系统状态**: 运行状态、时间、运行时长
- **任务进度**: 当前任务、进度条、详情
- **连接状态**: 机器人、Unity、数据库
- **系统日志**: 实时日志、导出功能

#### 🛡️ 安全监控面板
- **安全状态**: 总体安全、最后检查
- **碰撞监控**: 检测状态、详情、灵敏度
- **紧急控制**: 紧急停止按钮、状态
- **安全区域**: 工作区、机器人区、人员区
- **安全警报**: 警报列表、确认、清空

## 🚀 快速恢复步骤

### 如果所有面板都消失了:
1. 点击菜单栏"视图" → "重置布局"
2. 所有面板立即恢复到默认位置

### 如果只是某个面板消失了:
1. 点击菜单栏"视图"
2. 勾选对应的面板名称
3. 面板会重新显示

### 如果面板位置混乱了:
1. 拖拽面板标题栏可以重新排列
2. 或者使用"视图" → "重置布局"一键恢复

## 🔧 技术实现

### 视图菜单代码
```cpp
// 视图菜单
QMenu* viewMenu = m_menuBar->addMenu("视图(&V)");

// 停靠面板切换动作
QAction* parameterAction = m_parameterDock->toggleViewAction();
QAction* statusAction = m_statusDock->toggleViewAction();  
QAction* safetyAction = m_safetyDock->toggleViewAction();

// 重置布局动作
QAction* resetLayoutAction = new QAction("重置布局(&R)", this);
connect(resetLayoutAction, &QAction::triggered, this, &MainWindow::resetLayout);
```

### 重置布局实现
```cpp
void MainWindow::resetLayout() {
    // 显示所有停靠面板
    m_parameterDock->setVisible(true);
    m_statusDock->setVisible(true);
    m_safetyDock->setVisible(true);
    
    // 重新设置为右侧停靠
    addDockWidget(Qt::RightDockWidgetArea, m_parameterDock);
    addDockWidget(Qt::RightDockWidgetArea, m_statusDock);
    addDockWidget(Qt::RightDockWidgetArea, m_safetyDock);
    
    // 设置标签页模式
    tabifyDockWidget(m_parameterDock, m_statusDock);
    tabifyDockWidget(m_statusDock, m_safetyDock);
    
    // 激活参数配置面板
    m_parameterDock->raise();
}
```

## 📋 常见问题

### Q: 为什么面板会消失？
A: 用户可能意外点击了面板的关闭按钮(×)，或者拖拽时误操作

### Q: 面板恢复后位置不对？
A: 使用"视图" → "重置布局"可以恢复到标准位置

### Q: 能否锁定面板防止误操作？
A: 可以通过右键面板标题栏选择"锁定"来防止意外移动

### Q: 面板可以放到其他位置吗？
A: 可以，拖拽面板标题栏可以停靠到左侧、底部等位置

## 🎯 预防措施

### 用户操作建议
1. **谨慎使用关闭按钮**: 面板右上角的×按钮会隐藏面板
2. **使用标签页切换**: 点击面板标签而不是拖拽
3. **定期保存布局**: 找到合适布局后避免频繁调整
4. **熟悉恢复方法**: 记住"视图"菜单的位置

### 开发改进
1. ✅ 添加视图菜单和重置功能
2. 🔄 考虑添加布局保存/恢复功能
3. 🔄 添加面板锁定功能
4. 🔄 添加键盘快捷键支持

## 📝 更新日志

**2025-12-18**: 
- ✅ 添加视图菜单
- ✅ 实现面板显示/隐藏切换
- ✅ 添加重置布局功能
- ✅ 完善用户体验

**解决方案**: 现在用户可以通过多种方式轻松恢复停靠面板，不再担心面板丢失问题！